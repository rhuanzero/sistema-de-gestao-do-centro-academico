<div class="container-eventos">
  
  <header class="header-eventos">
    <div>
      <h2>ğŸ“… GestÃ£o de Eventos</h2>
      <p style="color: #666; font-size: 0.9rem;">Organize o calendÃ¡rio acadÃªmico e festas.</p>
    </div>
    
    <button *ngIf="!modoCriacao" (click)="resetarForm(); modoCriacao = true" class="btn-novo">
      + Agendar Evento
    </button>
    <button *ngIf="modoCriacao" (click)="modoCriacao = false" class="btn-voltar">
      â¬… Voltar para Lista
    </button>
  </header>

  <div *ngIf="modoCriacao" class="form-container">
    <h3 style="margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
      {{ idEmEdicao() ? 'âœï¸ Editar Evento' : 'â• Novo Agendamento' }}
    </h3>
    
    <form (ngSubmit)="agendarEvento()">
      
      <div class="form-group">
        <label>TÃ­tulo do Evento *</label>
        <input [(ngModel)]="novoEvento.titulo" name="titulo" required type="text" placeholder="Ex: Calourada 2024">
      </div>

      <div class="form-group">
        <label>Organizador</label>
        <input [(ngModel)]="novoEvento.organizador" name="organizador" type="text" placeholder="Ex: GestÃ£o 2025 (Opcional)">
      </div>

      <div class="form-group">
        <label>DescriÃ§Ã£o</label>
        <textarea [(ngModel)]="novoEvento.descricao" name="descricao" rows="3" placeholder="Detalhes do evento..."></textarea>
      </div>

      <div class="form-row">
        <div class="form-group half">
          <label>Data InÃ­cio *</label>
          <input [(ngModel)]="novoEvento.data_inicio" name="data_inicio" type="datetime-local" required>
        </div>
        <div class="form-group half">
          <label>Data Fim *</label>
          <input [(ngModel)]="novoEvento.data_fim" name="data_fim" type="datetime-local" required>
        </div>
      </div>

      <div class="form-group">
        <label>Local</label>
        <input [(ngModel)]="novoEvento.local" name="local" type="text" placeholder="Ex: AuditÃ³rio A">
      </div>

      <div class="form-actions" style="margin-top: 20px;">
        <button type="submit" [disabled]="loading()" class="btn-salvar">
          {{ loading() ? 'Salvando...' : (idEmEdicao() ? 'Salvar AlteraÃ§Ãµes' : 'Confirmar Agendamento') }}
        </button>
      </div>
    </form>
  </div>

  <div *ngIf="!modoCriacao" class="lista-container">
    
    <div *ngIf="eventos().length === 0 && !loading()" class="empty-state">
      <div style="text-align: center; padding: 40px; color: #999;">
        <span style="font-size: 3rem;">ğŸ“…</span>
        <p>Nenhum evento agendado ainda.</p>
      </div>
    </div>

    <div *ngIf="loading()" style="text-align: center; padding: 20px;">
      Carregando eventos...
    </div>

    <div class="cards-grid">
      <div *ngFor="let evento of eventos()" class="evento-card">
        
        <div class="evento-date">
          <span class="day">{{ evento.data_inicio | date:'dd' }}</span>
          <span class="month">{{ evento.data_inicio | date:'MMM' }}</span>
          <span class="year" style="font-size: 0.7rem; color: #666;">{{ evento.data_inicio | date:'yyyy' }}</span>
        </div>
        
        <div class="evento-info">
          <h4>{{ evento.titulo }}</h4>
          
          <p class="organizador" style="color: #2563eb; font-weight: 600; font-size: 0.85rem; margin: 5px 0;">
            ğŸ‘¤ {{ evento.organizador || 'OrganizaÃ§Ã£o Geral' }}
          </p>

          <p class="local" style="color: #555; font-size: 0.9rem;">
            ğŸ“ {{ evento.local }}
          </p>
          <p class="desc" style="color: #777; font-size: 0.9rem; margin-top: 5px;">
            {{ evento.descricao }}
          </p>
        </div>

        <div class="evento-actions">
           <button (click)="editarEvento(evento)" class="btn-icon btn-editar" title="Editar">âœï¸</button>
           <button (click)="abrirModalExclusao(evento.id)" class="btn-icon btn-lixeira" title="Excluir">ğŸ—‘ï¸</button>
        </div>

      </div>
    </div>

  </div>

  <div *ngIf="modalExclusao().show" class="modal-overlay">
    <div class="modal-box">
      <div class="modal-icon">âš ï¸</div>
      <h3>Excluir Evento?</h3>
      <p>Tem certeza que deseja remover este evento? Essa aÃ§Ã£o nÃ£o pode ser desfeita.</p>
      
      <div class="modal-actions">
        <button (click)="fecharModal()" class="btn-cancelar">Cancelar</button>
        <button (click)="confirmarExclusao()" class="btn-confirmar">Sim, Excluir</button>
      </div>
    </div>
  </div>

  <div *ngIf="feedback().show" class="toast-notification" [ngClass]="feedback().type">
    <span class="toast-icon">
      {{ feedback().type === 'success' ? 'âœ…' : 'âŒ' }}
    </span>
    <span class="toast-message">{{ feedback().msg }}</span>
  </div>

</div>