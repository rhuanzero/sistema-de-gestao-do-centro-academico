<div class="comunicacao-container"> 
<header class="page-header">
  <div style="display: flex; align-items: center; gap: 15px;">
    <h2>üë• Gest√£o de Membros</h2>
    <button (click)="logout()" class="btn-cancel" style="padding: 5px 10px; font-size: 0.8rem;">Sair</button>
  </div>
  
  <button *ngIf="ehPresidente()" (click)="abrirModalCadastro()" class="btn-novo">+ Novo Membro</button>
</header>

  <section class="card-section">
    <h3>Membros do CA</h3>
    
    <div *ngIf="loading() && !modalFormAberto()" class="loading">Carregando...</div>
    <div *ngIf="membros().length === 0 && !loading()" class="empty">Nenhum membro encontrado.</div>

    <div class="list-items">
      <div *ngFor="let membro of membros()" class="item-card">
        <div class="icon-social">
           <span>üë§</span>
        </div>
        
        <div class="item-info">
          <h4>{{ membro.nome }}</h4>
          <p>{{ membro.cargo }} ‚Ä¢ {{ membro.email }}</p>
        </div>

        <div class="item-actions">
          <span [class]="'status-badge ' + getStatusClass(membro.status)">{{ membro.status }}</span>
          
          <ng-container *ngIf="ehPresidente()">
            <button (click)="editarMembro(membro)" class="btn-icon" title="Editar">‚úèÔ∏è</button>
            <button (click)="prepararExclusao(membro)" class="btn-icon btn-delete" title="Excluir">üóëÔ∏è</button>
          </ng-container>
        </div>
      </div>
    </div>
  </section>

  <div *ngIf="modalFormAberto()" class="modal-overlay">
    <div class="modal-content">
      <h3>{{ modoEdicao() ? 'Editar Membro' : 'Novo Membro' }}</h3>
      
      <form (ngSubmit)="salvarMembro()">
        <label>Nome Completo</label>
        <input [(ngModel)]="novoMembro.nome" name="nome" type="text" required>

        <label>Email</label>
        <input [(ngModel)]="novoMembro.email" name="email" type="email" required>

        <div class="row-inputs">
          <div style="flex: 1; margin-right: 10px;">
            <label>CPF</label>
            <input [(ngModel)]="novoMembro.cpf" name="cpf" type="text" required>
          </div>
          <div style="flex: 1;">
            <label>Telefone</label>
            <input [(ngModel)]="novoMembro.telefone" name="telefone" type="text">
          </div>
        </div>

        <div class="row-inputs">
          <div style="flex: 1; margin-right: 10px;">
            <label>Cargo</label>
            <select [(ngModel)]="novoMembro.cargo" name="cargo">
              <option value="Membro">Membro</option>
              <option value="Tesoureiro">Tesoureiro</option>
              <option value="Vice-Presidente">Vice-Presidente</option>
              <option value="Secret√°rio">Secret√°rio</option>
              <option value="Coordenador">Coordenador</option>
            </select>
          </div>
          <div style="flex: 1;">
            <label>Status</label>
            <select [(ngModel)]="novoMembro.status" name="status">
              <option value="Ativo">Ativo</option>
              <option value="Inativo">Inativo</option>
            </select>
          </div>
        </div>

        <label>Senha {{ modoEdicao() ? '(Deixe em branco para n√£o alterar)' : '*' }}</label>
        <input [(ngModel)]="novoMembro.senha" name="senha" type="password" [required]="!modoEdicao()">

        <div class="modal-actions">
          <button type="button" (click)="fecharModalForm()" class="btn-cancel">Cancelar</button>
          <button type="submit" class="btn-save" [disabled]="loading()">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <div *ngIf="modalDeleteAberto()" class="modal-overlay">
    <div class="modal-content" style="text-align: center; width: 400px;">
      <div style="font-size: 3rem; margin-bottom: 10px;">‚ö†Ô∏è</div>
      <h3>Tem certeza?</h3>
      <p>Voc√™ vai remover <strong>{{ membroParaExclusao?.nome }}</strong> do sistema.</p>
      
      <div class="modal-actions" style="justify-content: center; margin-top: 20px;">
        <button (click)="fecharModalDelete()" class="btn-cancel" style="background: #e5e7eb; color: #374151;">Cancelar</button>
        <button (click)="confirmarExclusao()" class="btn-save" style="background: #dc2626; color: white;">Sim, remover</button>
      </div>
    </div>
  </div>

</div>